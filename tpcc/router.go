package tpcc

import (
	"fmt"
	"strconv"
	"strings"
)

var (
	AllServers  map[string]struct{}
	WIDRouteMap map[int]string
)

func init() {
	AllServers = make(map[string]struct{})
	WIDRouteMap = make(map[int]string)
	for _, line := range strings.Split(routeData, "\n") {
		line = strings.TrimSpace(line)
		if line == "" {
			continue
		}
		tmp := strings.Split(line, "|")
		pName := strings.TrimSpace(tmp[2])
		pID, err := strconv.Atoi(pName[1:])
		if err != nil {
			panic("Invalid partition name: " + pName)
		}
		addr := strings.TrimSpace(tmp[3])
		addr = fmt.Sprintf("%v:4002", strings.Split(addr, ":")[0])
		AllServers[addr] = struct{}{}
		WIDRouteMap[pID] = addr
	}

	fmt.Println("================================ route info ======================================")
	fmt.Println("All Servers:", AllServers)
	for wid, addr := range WIDRouteMap {
		fmt.Printf("WID %d -> %s\n", wid, addr)
	}
	fmt.Println("================================ route info ======================================")
}

var routeData = `
|        7 | p0             | 192.168.173.161:25360 |
|        6 | p1             | 192.168.173.159:25360 |
|        7 | p10            | 192.168.173.161:25360 |
|        6 | p100           | 192.168.173.159:25360 |
|        5 | p101           | 192.168.173.160:25360 |
|        7 | p102           | 192.168.173.161:25360 |
|        4 | p103           | 192.168.173.158:25360 |
|        7 | p104           | 192.168.173.161:25360 |
|        6 | p105           | 192.168.173.159:25360 |
|        6 | p106           | 192.168.173.159:25360 |
|        4 | p107           | 192.168.173.158:25360 |
|        5 | p108           | 192.168.173.160:25360 |
|        7 | p109           | 192.168.173.161:25360 |
|        5 | p11            | 192.168.173.160:25360 |
|        4 | p110           | 192.168.173.158:25360 |
|        7 | p111           | 192.168.173.161:25360 |
|        5 | p112           | 192.168.173.160:25360 |
|        7 | p113           | 192.168.173.161:25360 |
|        7 | p114           | 192.168.173.161:25360 |
|        6 | p115           | 192.168.173.159:25360 |
|        7 | p116           | 192.168.173.161:25360 |
|        6 | p117           | 192.168.173.159:25360 |
|        6 | p118           | 192.168.173.159:25360 |
|        6 | p119           | 192.168.173.159:25360 |
|        4 | p12            | 192.168.173.158:25360 |
|        5 | p120           | 192.168.173.160:25360 |
|        7 | p121           | 192.168.173.161:25360 |
|        7 | p122           | 192.168.173.161:25360 |
|        5 | p123           | 192.168.173.160:25360 |
|        6 | p124           | 192.168.173.159:25360 |
|        7 | p125           | 192.168.173.161:25360 |
|        7 | p126           | 192.168.173.161:25360 |
|        6 | p127           | 192.168.173.159:25360 |
|        6 | p128           | 192.168.173.159:25360 |
|        6 | p129           | 192.168.173.159:25360 |
|        4 | p13            | 192.168.173.158:25360 |
|        6 | p130           | 192.168.173.159:25360 |
|        6 | p131           | 192.168.173.159:25360 |
|        4 | p132           | 192.168.173.158:25360 |
|        6 | p133           | 192.168.173.159:25360 |
|        6 | p134           | 192.168.173.159:25360 |
|        4 | p135           | 192.168.173.158:25360 |
|        4 | p136           | 192.168.173.158:25360 |
|        6 | p137           | 192.168.173.159:25360 |
|        6 | p138           | 192.168.173.159:25360 |
|        7 | p139           | 192.168.173.161:25360 |
|        7 | p14            | 192.168.173.161:25360 |
|        6 | p140           | 192.168.173.159:25360 |
|        5 | p141           | 192.168.173.160:25360 |
|        7 | p142           | 192.168.173.161:25360 |
|        7 | p143           | 192.168.173.161:25360 |
|        6 | p144           | 192.168.173.159:25360 |
|        6 | p145           | 192.168.173.159:25360 |
|        4 | p146           | 192.168.173.158:25360 |
|        6 | p147           | 192.168.173.159:25360 |
|        6 | p148           | 192.168.173.159:25360 |
|        6 | p149           | 192.168.173.159:25360 |
|        5 | p15            | 192.168.173.160:25360 |
|        4 | p150           | 192.168.173.158:25360 |
|        6 | p151           | 192.168.173.159:25360 |
|        7 | p152           | 192.168.173.161:25360 |
|        4 | p153           | 192.168.173.158:25360 |
|        6 | p154           | 192.168.173.159:25360 |
|        6 | p155           | 192.168.173.159:25360 |
|        5 | p156           | 192.168.173.160:25360 |
|        4 | p157           | 192.168.173.158:25360 |
|        7 | p158           | 192.168.173.161:25360 |
|        7 | p159           | 192.168.173.161:25360 |
|        4 | p16            | 192.168.173.158:25360 |
|        7 | p160           | 192.168.173.161:25360 |
|        4 | p161           | 192.168.173.158:25360 |
|        6 | p162           | 192.168.173.159:25360 |
|        6 | p163           | 192.168.173.159:25360 |
|        4 | p164           | 192.168.173.158:25360 |
|        4 | p165           | 192.168.173.158:25360 |
|        4 | p166           | 192.168.173.158:25360 |
|        7 | p167           | 192.168.173.161:25360 |
|        4 | p168           | 192.168.173.158:25360 |
|        4 | p169           | 192.168.173.158:25360 |
|        7 | p17            | 192.168.173.161:25360 |
|        7 | p170           | 192.168.173.161:25360 |
|        4 | p171           | 192.168.173.158:25360 |
|        4 | p172           | 192.168.173.158:25360 |
|        7 | p173           | 192.168.173.161:25360 |
|        6 | p174           | 192.168.173.159:25360 |
|        4 | p175           | 192.168.173.158:25360 |
|        5 | p176           | 192.168.173.160:25360 |
|        6 | p177           | 192.168.173.159:25360 |
|        5 | p178           | 192.168.173.160:25360 |
|        4 | p179           | 192.168.173.158:25360 |
|        6 | p18            | 192.168.173.159:25360 |
|        7 | p180           | 192.168.173.161:25360 |
|        7 | p181           | 192.168.173.161:25360 |
|        4 | p182           | 192.168.173.158:25360 |
|        7 | p183           | 192.168.173.161:25360 |
|        7 | p184           | 192.168.173.161:25360 |
|        6 | p185           | 192.168.173.159:25360 |
|        4 | p186           | 192.168.173.158:25360 |
|        4 | p187           | 192.168.173.158:25360 |
|        7 | p188           | 192.168.173.161:25360 |
|        7 | p189           | 192.168.173.161:25360 |
|        5 | p19            | 192.168.173.160:25360 |
|        7 | p190           | 192.168.173.161:25360 |
|        4 | p191           | 192.168.173.158:25360 |
|        4 | p192           | 192.168.173.158:25360 |
|        7 | p193           | 192.168.173.161:25360 |
|        7 | p194           | 192.168.173.161:25360 |
|        7 | p195           | 192.168.173.161:25360 |
|        7 | p196           | 192.168.173.161:25360 |
|        7 | p197           | 192.168.173.161:25360 |
|        7 | p198           | 192.168.173.161:25360 |
|        4 | p199           | 192.168.173.158:25360 |
|        4 | p2             | 192.168.173.158:25360 |
|        7 | p20            | 192.168.173.161:25360 |
|        7 | p21            | 192.168.173.161:25360 |
|        6 | p22            | 192.168.173.159:25360 |
|        4 | p23            | 192.168.173.158:25360 |
|        6 | p24            | 192.168.173.159:25360 |
|        7 | p25            | 192.168.173.161:25360 |
|        7 | p26            | 192.168.173.161:25360 |
|        7 | p27            | 192.168.173.161:25360 |
|        6 | p28            | 192.168.173.159:25360 |
|        4 | p29            | 192.168.173.158:25360 |
|        6 | p3             | 192.168.173.159:25360 |
|        6 | p30            | 192.168.173.159:25360 |
|        4 | p31            | 192.168.173.158:25360 |
|        7 | p32            | 192.168.173.161:25360 |
|        5 | p33            | 192.168.173.160:25360 |
|        7 | p34            | 192.168.173.161:25360 |
|        4 | p35            | 192.168.173.158:25360 |
|        4 | p36            | 192.168.173.158:25360 |
|        4 | p37            | 192.168.173.158:25360 |
|        4 | p38            | 192.168.173.158:25360 |
|        7 | p39            | 192.168.173.161:25360 |
|        4 | p4             | 192.168.173.158:25360 |
|        6 | p40            | 192.168.173.159:25360 |
|        5 | p41            | 192.168.173.160:25360 |
|        7 | p42            | 192.168.173.161:25360 |
|        7 | p43            | 192.168.173.161:25360 |
|        7 | p44            | 192.168.173.161:25360 |
|        4 | p45            | 192.168.173.158:25360 |
|        4 | p46            | 192.168.173.158:25360 |
|        7 | p47            | 192.168.173.161:25360 |
|        7 | p48            | 192.168.173.161:25360 |
|        4 | p49            | 192.168.173.158:25360 |
|        7 | p5             | 192.168.173.161:25360 |
|        4 | p50            | 192.168.173.158:25360 |
|        4 | p51            | 192.168.173.158:25360 |
|        6 | p52            | 192.168.173.159:25360 |
|        6 | p53            | 192.168.173.159:25360 |
|        4 | p54            | 192.168.173.158:25360 |
|        6 | p55            | 192.168.173.159:25360 |
|        6 | p56            | 192.168.173.159:25360 |
|        5 | p57            | 192.168.173.160:25360 |
|        7 | p58            | 192.168.173.161:25360 |
|        4 | p59            | 192.168.173.158:25360 |
|        7 | p6             | 192.168.173.161:25360 |
|        6 | p60            | 192.168.173.159:25360 |
|        6 | p61            | 192.168.173.159:25360 |
|        4 | p62            | 192.168.173.158:25360 |
|        4 | p63            | 192.168.173.158:25360 |
|        6 | p64            | 192.168.173.159:25360 |
|        6 | p65            | 192.168.173.159:25360 |
|        5 | p66            | 192.168.173.160:25360 |
|        7 | p67            | 192.168.173.161:25360 |
|        6 | p68            | 192.168.173.159:25360 |
|        4 | p69            | 192.168.173.158:25360 |
|        6 | p7             | 192.168.173.159:25360 |
|        6 | p70            | 192.168.173.159:25360 |
|        5 | p71            | 192.168.173.160:25360 |
|        6 | p72            | 192.168.173.159:25360 |
|        6 | p73            | 192.168.173.159:25360 |
|        7 | p74            | 192.168.173.161:25360 |
|        4 | p75            | 192.168.173.158:25360 |
|        5 | p76            | 192.168.173.160:25360 |
|        6 | p77            | 192.168.173.159:25360 |
|        6 | p78            | 192.168.173.159:25360 |
|        6 | p79            | 192.168.173.159:25360 |
|        4 | p8             | 192.168.173.158:25360 |
|        5 | p80            | 192.168.173.160:25360 |
|        4 | p81            | 192.168.173.158:25360 |
|        7 | p82            | 192.168.173.161:25360 |
|        4 | p83            | 192.168.173.158:25360 |
|        4 | p84            | 192.168.173.158:25360 |
|        7 | p85            | 192.168.173.161:25360 |
|        6 | p86            | 192.168.173.159:25360 |
|        4 | p87            | 192.168.173.158:25360 |
|        6 | p88            | 192.168.173.159:25360 |
|        6 | p89            | 192.168.173.159:25360 |
|        6 | p9             | 192.168.173.159:25360 |
|        5 | p90            | 192.168.173.160:25360 |
|        5 | p91            | 192.168.173.160:25360 |
|        4 | p92            | 192.168.173.158:25360 |
|        4 | p93            | 192.168.173.158:25360 |
|        4 | p94            | 192.168.173.158:25360 |
|        5 | p95            | 192.168.173.160:25360 |
|        7 | p96            | 192.168.173.161:25360 |
|        7 | p97            | 192.168.173.161:25360 |
|        6 | p98            | 192.168.173.159:25360 |
|        4 | p99            | 192.168.173.158:25360 |`
